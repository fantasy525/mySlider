(function($){$.fn.slider=function(c){var d=this;var e=d.children("ul.slider-content");var f=d.children("ul.slider-point").children("li");var g=null;var h=1;var i;var j=$.extend(true,{speed:500,interTime:3000,numbers:null,width:null,autoPlay:true,point:true,prev:false,next:false,fullScreen:false,minScreenWidth:1000},c);if(!j.numbers||!j.width){alert("请填写宽度和个数");return false}e.css({"width":j.width*(j.numbers+2)+'px'})if(j.fullScreen){$(window).resize(function(){j.width=window.innerWidth<=j.minScreenWidth?j.minScreenWidth:window.innerWidth;e.css({"width":j.width*(j.numbers+2)+'px',"left":-j.width*h+"px"})e.children('li').css("width",j.width)})}function cloneNode(){var a=e.children("li:first-child").clone();var b=e.children("li:last-child").clone();b.insertBefore(e.children("li:first-child"));e.append(a)}cloneNode();function animate(a){e.stop(true,true).animate({"left":-(h-a)*j.width},j.speed,"swing",function(){a>0?h--:h++;i=parseFloat(e.css("left"));if(i<=-j.width*(j.numbers+1)){e.css({"left":-j.width});h=1}else{if(i>=0){e.css({"left":-j.width*j.numbers});h=j.numbers}}if(j.point){f.eq(h-1).addClass("point-hover").siblings("li").removeClass("point-hover")}})}function moveR(){animate(1)}function autoPlay(){g=setInterval(moveL,3000)}function changePoint(){f.eq(h-1).addClass("point-hover").siblings("li").removeClass("point-hover")}function pointAction(){f.mouseenter(function(){var a=$(this).index()+1;if(a>h){e.stop(true,true).animate({"left":-(a)*j.width},j.speed,"swing",function(){console.log(h);h=a;changePoint()})}else{if(a<h){e.stop(!0,!0).animate({"left":-(a)*j.width},j.speed,"swing",function(){h=a;changePoint()})}}})}function moveL(){animate(-1)}d.parent(".slider-wrap").on({"mouseenter":function(){clearInterval(g)},"mouseleave":function(){clearInterval(g);j.autoPlay?autoPlay():null}});if(j.prev&&j.next){j.next.on("click",function(){clearInterval(g);moveL()});j.prev.on("click",function(){clearInterval(g);moveR()})}if(j.point){pointAction()}j.autoPlay?autoPlay():null}})(jQuery);
